version: "3.8"

services:
  kordia:
    image: zlosttk/kordia-music-app:1.0.4
    container_name: kordia
    hostname: kordia

    environment:
      - PGID=1000
      - PUID=1000
      - TZ=America/Mexico_City
      - CORS_ORIGINS=*
      # Agrega aqu√≠ la IP de tu PC o tu dominio local (.local) para que mkcert genere el SSL
      - MKCERT_DOMAINS=192.168.1.61 192.168.1.60 ubuntu.local
      # Data directories
      - DATA_DIR=./Kordia_data
      # Cache configuration
      - CACHE_TTL=5400
      - CACHE_MAX_SIZE=500
      - CACHE_CLEANUP_DAYS=30
      # yt-dlp configuration
      - YTDLP_QUIET=true
      - YTDLP_NO_WARNINGS=true
      # Audio format
      - AUDIO_FORMAT=m4a
      - AUDIO_CODEC=m4a
      # Application
      - APP_NAME=Kordia API
      - APP_VERSION=1.0.4
      - DEBUG=false
      # Server
      - HOST=0.0.0.0
      - PORT=8000

    ports:
      - "8000:8000"

    volumes:
      - /DATA/AppData/kordia/data:/app/backend/Kordia_data
      - /DATA/AppData/kordia/mkcert:/root/.local/share/mkcert

    restart: unless-stopped

    labels:
      - "casaos.icon=https://raw.githubusercontent.com/ZLostTK/Kordia/main/Kordia_Frontend/public/pwa-192x192.png"
      - "casaos.description=Kordia - Music app with offline support (PWA)"
      - "casaos.category=Music"

networks:
  kordia:
    name: kordia
    driver: bridge

x-casaos:
  author: ZLostTK
  category: Music
  icon: https://raw.githubusercontent.com/ZLostTK/Kordia/main/Kordia_Frontend/public/pwa-192x192.png
  index: /
  is_uncontrolled: false
  port_map: "8000"
  scheme: https
  store_app_id: kordia
  title:
    custom: "Kordia"
    en_us: "Kordia"
  description:
    en_us: "Music app with offline support (PWA)"